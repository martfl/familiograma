<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Genogram</title>
	<meta name="description" content="A genogram is a family tree diagram for visualizing hereditary patterns." />
	<!-- Copyright 1998-2017 by Northwoods Software Corporation. -->
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="go-debug.js"></script>
	<script src="genogram(1).js"></script>
	<script src="functions.js"></script>
</head>

<body onload="init()">
	<div id="sample">
		<div>
			<input id="id" type="hidden" value="1"> Nombre:
			<br>
			<input id="nombre2" type="text" name="nombre"><br> Edad:
			<br>
			<input id="edad2" type="text" name="edad"><br>Sexo:
			<br>
			<input type="radio" name="gender2" value="M"> Hombre<br>
			<input type="radio" name="gender2" value="F"> Mujer<br>Relación:
			<br>
			<input type="radio" name="relacion2" value="conyuge">Cónyuge<br>
			<input type="radio" name="relacion2" value="hijo">Hijo<br>
			<input type="radio" name="relacion2" value="padre">Padre<br><br>
			<input id="agregarfam" type="button" value="Agregar Familiar">
			<input onclick="agregarPadres(myDiagram)" type="button" value="Agregar Padres">
			<input onclick="borrarNodo(myDiagram)" type="button" value="Borrar Familiar">
		</div>
		<div id="propertiesPanel">
			Nombre:
			<br>
			<input id="nombre" type="text" name="nombre" onchange="updateData(this.value, 'n')"><br> Edad:
			<br>
			<input id="edad" type="text" name="edad" onchange="updateData(this.value, 'e')"><br>Sexo:
			<br>
			<input type="radio" name="gender" onchange="updateData(this.value, 's')" value="M"> Hombre<br>
			<input type="radio" name="gender" onchange="updateData(this.value, 's')" value="F"> Mujer
			<br>
		</div>
		<div id="content"></div>
		<div id="myDiagramDiv" style="border: solid 1px black; width:100%; height:500px"></div>
	</div>
	<script>
		var id = $("#id").val();

		$(document).ready(function() {
			$("input[name=gender2][value=M]").click();
			$("input[name=relacion2][value=conyuge]").click();
			$.ajax({
				type: "POST",
				url: "process.php",
				data: {
					'id': id
				},
				success: function(data) {
					data = $.parseJSON(data);
					//$("#nombre").val(data.n);
					//$("#edad").val(data.e);
					buildJSON(data, id);
				}

			});
		});

		function buildJSON(data, id) {
			var paciente = {};
			paciente["key"] = 0;
			paciente["n"] = data.n
			paciente["e"] = data.e;
			paciente["s"] = data.s;
			paciente["a"] = ["A"];
			//console.log(paciente);
			/*
			$.ajax({
				type: "POST",
				url: "saveFile.php",
				data: {
					data: paciente,
					id: id,
				},
				success: function(data) {
					//console.log(data);
				}
			});
			*/
		}

		$("#agregarfam").click(function() {
			agregarFamiliar(myDiagram, {
				'name': $("#nombre2").val(),
				'edad': $("#edad2").val(),
				'sexo': $('input[name=gender2]:checked').val(),
				'relacion': $('input[name=relacion2]:checked').val()
			})
		});

	</script>
</body>

</html>
