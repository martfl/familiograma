<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
	<title>Familiograma</title>
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/dashboard.css" rel="stylesheet">
	<style>
		label {
			display: block;
		}

	</style>
</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-3 col-md-2 sidebar">

				<div class="form-group">
					<input id="id" type="hidden" value="2">
					<label class="control-label">Nombre:</label>
					<input id="nombre2" class="form-control" type="text" name="nombre">
					<br>
					<label class="control-label">Edad</label>
					<input id="edad2" class="form-control" type="text" name="edad">
					<br>
					<label class="control-label">Sexo</label>
					<div class="radio">
						<label for="M"><input id="M" type="radio" name="gender2" value="M">Hombre</label>
						<label for="F"><input id="F" type="radio" name="gender2" value="F">Mujer</label>
					</div>
					<br>
					<label class="control-label">Parentesco</label>
					<div class="radio">
						<label for="conyuge"><input id="conyuge" type="radio" name="relacion2" value="conyuge">Cónyuge</label>
						<label for="hijo"><input id="hijo" type="radio" name="relacion2" value="hijo">Hijo</label>
						<label for="hijo"><input id="sinrelacion" type="radio" name="relacion2" value="srelacion">Sin relación</label>
					</div>
					<br>
					<label class="control-label">Finado</label>
					<div class="checkbox">
						<label for="finado"><input id="finado" type="checkbox" name="finado" value="true">Si</label>
					</div>
					<label class="control-label">NSE</label>
					<div class="radio">
						<label for="Alta"><input id="alta" type="radio" name="nse" value="alta">Alta</label>
						<label for="Media"><input id="media" type="radio" name="nse" value="media">Media</label>
						<label for="Baja"><input checked="" id="baja" type="radio" name="nse" value="baja">Baja</label>
					</div>
					<br>
					<label class="control-label">Teléfono</label>
					<input class="form-control" id="telefono" type="text" name="telefono">
					<br>
					<label class="control-label">Cuidador</label>
					<div class="checkbox">
						<label for="cuidador"><input id="cuidador" type="checkbox" name="cuidador" value="true">Cuidador</label>
					</div>
					<br>
					<label class="control-label">Estado Civil:</label>
					<div class="radio">
						<label for="casado"><input id="casado" type="radio" name="estadoCivil" value="casado">Casado</label>
						<label for="soltero"><input id="divorciado" type="radio" name="estadoCivil" value="divorciado">Divorciado</label>
						<label for="soltero"><input checked='' id="soltero" type="radio" name="estadoCivil" value="soltero">Soltero</label>
						<label for="viudo"><input id="viudo" type="radio" name="estadocivil" value="viudo">Viudo</label>
					</div>
					<br>
					<label class="control-label">Calidad de relación</label>
					<label class="control-label">Paciente-Familiar</label>
					<div class="radio">
						<label for="buena"><input checked="" id="buena" type="radio" name="pacienteFamiliar" value="buena"> Buena</label>
						<label for="regular"><input id="regular" type="radio" name="pacienteFamiliar" value="regular"> Regular</label>
						<label for="mala"><input id="mala" type="radio" name="pacienteFamiliar" value="mala"> Mala</label>
					</div>
					<label class="control-label">Familiar-Paciente</label>
					<div class="radio">
						<label for="buenaFp"><input checked="" id="buenaFP" type="radio" name="familiarPaciente" value="buena"> Buena</label>
						<label for="regularFP"><input id="regularFP" type="radio" name="familiarPaciente" value="regular"> Regular</label>
						<label for="malaFP"><input id="malaFP" type="radio" name="familiarPaciente" value="mala"> Mala</label>
					</div>
					<br>
					<label class="control-label">Escolaridad</label>
					<select class="form-control" id="escolaridad" name="escolaridad">
							<option selected="selected" value="Ninguna">Ninguna</option>
							<option value="primaria">Primaria</option>
							<option value="secundaria">Secundaria</option>
							<option value="bachillerato">Bachillerato</option>
							<option value="tecnico">Tecnica</option>
							<option value="preparatoria">Preparatoria</option>
							<option value="universidad">Universidad</option>
							<option value="maestria">Maestria</option>
							<option value="doctorado">Doctorado</option>
						</select>
					<br>
					<label class="control-label">Religión</label>
					<select class="form-control" id="religion" name="religion">
							<option value="Ninguna">Ninguna</option>
							<option value="catolica">Catolica</option>
							<option value="cristiana">Cristiana</option>
							<option value="testigo">Testigo de Jeovha</option>
						</select>
					<br>
					<label class="control-label">Ocupación</label>
					<input class="form-control" id="ocupacion" type="text" name="ocupacion">
					<br>
					<label class="control-label">Estado ocupacional</label>
					<select class="form-control" id="estadoOcupa">
						<option value="activo">Activo</option>
						<option value="jubilado">Jubilado</option>
						<option value="desempleado">Desempleado</option>
					</select>
					<br>
					<label class="control-label">Vive con Paciente</label>
					<div class="checkbox">
						<label for="viven"><input id="viven" type="checkbox" name="viven" value="true">Si</label>
					</div>


					<button class="btn btn-default btn-block" type="button" id="agregarfam">Agregar Familiar</button>
					<button class="btn btn-default btn-block" onclick="agregarPadres(myDiagram)">Agregar Padres</button>
					<button class="btn btn-default btn-block" onclick="agregarComentario(myDiagram)">Agregar Comentario</button>
					<button class="btn btn-default btn-block" onclick="agregarRelacion(myDiagram)">Agregar Relación</button>
				</div>
			</div>

			<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
				<h1 class="page-header">Familiograma</h1>
				<div class="form-group">
					<input type="button" class="btn btn-default" onclick="save(myDiagram)" value="Guardar">
					<input type="button" class="btn btn-default" onclick="makeBlob(myDiagram)" value="Exportar Imagen">
				</div>
				<div class="col-md-9 col-xs-12">
					<div id="myDiagramDiv" style="border: solid 1px black; width:100%; height:500px"></div>
				</div>
				<div class="col-md-3">
					<div class="form-group">
						<label for="comment">Comentarios</label>
						<textarea class="form-control" rows="5" id="comment"></textarea>
					</div>
				</div>
				<br>
				<div class="col-xs-12">
					<form class="form-inline">
						<div id="propertiesPanel" class="form-group">
							<div class="form-group">
								<label class="control-label">Nombre:</label>
								<input id="nombre" class="form-control" type="text" name="nombre" onchange="updateData(this.value, 'n')">
							</div>
							<div class="form-group">
								<label class="control-label">Edad:</label>
								<input id="edad" class="form-control" type="text" name="edad" onchange="updateData(this.value, 'e')">
							</div>
							<div class="form-group">
								<label class="control-label">Sexo:</label>
								<div class="radio">
									<label class="radio-inline" for="M"><input id="M" type="radio" name="gender" onchange="updateData(this.value, 's')" value="M"> Hombre</label>
									<label class="radio-inline" for="F"><input id="F" type="radio" name="gender" onchange="updateData(this.value, 's')" value="F"> Mujer</label>
								</div>
							</div>
							<div class="form-group">
								<input type="button" class="btn btn-default" onclick="borrarNodo(myDiagram)" style="bottom: 0;" value="Borrar Familiar">
							</div>
							<br>
							<div class="form-group">
								<label class="control-label">Ocupación:</label>
								<input id="ocupacion" class="form-control" type="text" name="ocupacion" onchange="updateData(this.value, 'ocupacion')">
							</div>
							<div class="form-group">
								<label class="control-label">Estado Civil:</label>
								<input id="estadoCivil" class="form-control" type="text" name="estadoCivil" onchange="updateData(this.value, 'estadoCivil')">
							</div>
							<div class="form-group">
								<label class="control-label">NSE:</label>
								<input id="nse" class="form-control" type="text" name="nse" onchange="updateData(this.value, 'nse')">
							</div>
							<div class="form-group">
								<label class="control-label">Escolaridad:</label>
								<input id="escoalridad" class="form-control" type="text" name="escolaridad" onchange="updateData(this.value, 'escolaridad')">
							</div>
							<div class="form-group">
								<label class="control-label">Religion:</label>
								<input id="religion" class="form-control" type="text" name="religion" onchange="updateData(this.value, 'religion')">
							</div>
							<div class="form-group checkbox">
								<label><input type="checkbox" value="vive" name="viveConPaciente" onchange="updateData(this.value, 'a')">Vive con paciente</label>
							</div>
							<div class="form-group checkbox">
								<label><input type="checkbox" value="economico" name="apoyoEconomico" onchange="updateData(this.value, 'a')">Apoyo Económico</label>
							</div>
							<div class="form-group checkbox">
								<label><input type="checkbox" value="finado" name="finado" onchange="updateData(this.value, 'a')">Finado</label>
							</div>
							<div class="form-group">
								<input type="button" class="btn btn-default" onclick="borrarNodo(myDiagram)" style="bottom: 0;" value="Borrar Familiar">
							</div>
							<br>
						</div>
					</form>
					<div id="guardarImagen"></div>
					<br>

					<div class="table-responsive">
						<table id="famTable" class="table">
							<thead>
								<tr>
									<th>Nombre</th>
									<th>Edad</th>
									<th>Sexo</th>
									<th>NSE</th>
									<th>Estado Civil</th>
									<th>Escolaridad</th>
									<th>Paciente-Familiar</th>
									<th>Familiar-Paciente</th>
									<th>Religión</th>
									<th>Ocupación</th>
									<th>Estado Ocupacional</th>
									<th>Vive con el paciente</th>
									<th>Apoyo económico</th>
									<th>Finado</th>
									<th>Cuida al Paciente</th>
								</tr>
								<tr>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
									<td>
										<p></p>
									</td>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="go-debug.js"></script>
	<script src="validate.js"></script>
	<script src="validaciones.js"></script>
	<script>
		$(document).ready(function() {
			$("input[name=gender2][value=M]").click();
			$("input[name=relacion2][value=conyuge]").click();
			$.ajax({
				type: 'post',
				data: {
					id: $("#id").val()
				},
				url: 'getPatient.php',
				success: function(data) {
					if (data != "") {
						var newFam = "[{\"key\":0,\"n\":\"" + data + "\",\"e\":\"\",\"s\":\"M\", \"a\":[\"A\"]}]";
						$.ajax({
							type: 'post',
							url: 'newFile.php',
							data: {
								id: $("#id").val(),
								json: newFam,
								comment: ""
							},
							success: function(data) {
								console.log(data);
							}
						});
					}
					init();
				}
			});
		});

	</script>
	<script src="genogram(1).js"></script>
	<script src="functions.js"></script>
</body>

</html>
