<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
	<title>familiograma</title>
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/dashboard.css" rel="stylesheet">
	<style>
		label {
			display: block;
		}

	</style>
</head>

<body onload="init()">
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-3 col-md-2 sidebar">
				<div class="form-group">
					<input id="id" type="hidden" value="1">
					<label class="control-label">Nombre:</label>
					<input id="nombre2" class="form-control" type="text" name="nombre">
					<br>
					<label class="control-label">Edad:</label>
					<input id="edad2" class="form-control" type="text" name="edad">
					<br>
					<label class="control-label">Sexo:</label>
					<div class="radio">
						<label for="M"><input id="M" type="radio" name="gender2" value="M"> Hombre</label>
						<label for="F"><input id="F" type="radio" name="gender2" value="F"> Mujer</label>
					</div>
					<br>
					<label class="control-label">Relaci贸n:</label>
					<div class="radio">
						<label for="conyuge"><input id="conyuge" type="radio" name="relacion2" value="conyuge">C贸nyuge</label>
						<label for="hijo"><input id="hijo" type="radio" name="relacion2" value="hijo">Hijo</label>
					</div>
					<br>
					<button class="btn btn-default btn-block" type="button" id="agregarfam">Agregar Familiar</button>
					<button class="btn btn-default btn-block" onclick="agregarPadres(myDiagram)">Agregar Padres</button>
				</div>
			</div>
			<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
				<h1 class="page-header">Familiograma</h1>
				<div id="myDiagramDiv" style="border: solid 1px black; width:100%; height:500px"></div>
				<br>
				<form class="form-inline">
					<div id="propertiesPanel" class="form-group">
						<div class="form-group">
							<label class="control-label">Nombre:</label>
							<input id="nombre" class="form-control" type="text" name="nombre" onchange="updateData(this.value, 'n')">
						</div>
						<div class="form-group">
							<label class="control-label">Edad:</label>
							<input id="edad" class="form-control" type="text" name="edad" onchange="updateData(this.value, 'e')">
						</div>
						<div class="form-group">
							<label class="control-label">Sexo:</label>
							<div class="radio">
								<label class="radio-inline" for="M"><input id="M" type="radio" name="gender" onchange="updateData(this.value, 's')" value="M"> Hombre</label>
								<label class="radio-inline" for="F"><input id="F" type="radio" name="gender" onchange="updateData(this.value, 's')" value="F"> Mujer</label>
							</div>
						</div>
						<div class="form-group">
							<input type="button" class="btn btn-default" onclick="borrarNodo(myDiagram)" style="bottom: 0;" value="Borrar Familiar">
						</div>
						<br>
					</div>	
				</form>
				<br>
<!--
				<div class="table-responsive">
					<table id="famTable" class="table">
						<tr>
							<th>Nombre</th>
							<th>Edad</th>
							<th>Sexo</th>
							<th>Ocupaci贸n</th>
							<th>Relaci贸n</th>
							<th>Madre</th>
							<th>Padre</th>
							<th>Pareja</th>
						</tr>
						<tr>
							<td><input id="nombre2" type="text" name="nombre"></td>
							<td><input id="edad2" type="text" name="edad"></td>
							<td>
								<input type="radio" name="gender2" value="M"> Hombre<br>
								<input type="radio" name="gender2" value="F"> Mujer
							</td>
							<td><input id="ocupacion2" type="text" name="ocupacion"></td>
							<td>
								<select>
					                        <option value="conyugue">Conyugue</option>
					                        <option value="hijo">Hijo</option>
					                        <option value="yerno">Yerno</option>
					                        <option value="nuera">Nuera</option>
					                        <option value="nuera">Nieto</option>
					                    </select>
							</td>
							<td>
								<select name="madre" id="madre">
					                        <option value="none" selected="Selected">Seleccionar</option>
					                    </select>
							</td>
							<td>
								<select name="padre" id="padre">
					                        <option value="none" selected="Selected">Seleccionar</option>
					                    </select>
							</td>
							<td>
								<select name="pareja" id="pareja">
					                        <option value="none" selected="Selected">Seleccionar</option>
					                    </select>
							</td>
							<td><input type="button" id="delPOIbutton" value="Delete" onclick="deleteRow(this)" /></td>
							<td><input type="button" id="guardarFam" value="Guardar" onclick="agregarFamiliar2(myDiagram,this)" /></td>
						</tr>
					</table>
				</div>
-->
			</div>
		</div>
	</div>
	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="go-debug.js"></script>
	<script src="genogram(1).js"></script>
	<script src="functions.js"></script>
	<script>
		var id = $("#id").val();

		$(document).ready(function() {
			$("input[name=gender2][value=M]").click();
			$("input[name=relacion2][value=conyuge]").click();
			$.ajax({
				type: "POST",
				url: "process.php",
				data: {
					'id': id
				},
				success: function(data) {
					data = $.parseJSON(data);
					//$("#nombre").val(data.n);
					//$("#edad").val(data.e);
					buildJSON(data, id);
				}

			});
		});

		function buildJSON(data, id) {
			var paciente = {};
			paciente["key"] = 0;
			paciente["n"] = data.n
			paciente["e"] = data.e;
			paciente["s"] = data.s;
			paciente["a"] = ["A"];
			//console.log(paciente);
			/*
			$.ajax({
				type: "POST",
				url: "saveFile.php",
				data: {
					data: paciente,
					id: id,
				},
				success: function(data) {
					//console.log(data);
				}
			});
			*/
		}

		$("#agregarfam").click(function() {
			agregarFamiliar(myDiagram, {
				'name': $("#nombre2").val(),
				'edad': $("#edad2").val(),
				'sexo': $('input[name=gender2]:checked').val(),
				'relacion': $('input[name=relacion2]:checked').val()
			})
		});

	</script>
</body>

</html>
